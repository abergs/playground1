var x=Object.defineProperty;var m=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var f=(o,t,e)=>t in o?x(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,u=(o,t)=>{for(var e in t||(t={}))B.call(t,e)&&f(o,e,t[e]);if(m)for(var e of m(t))k.call(t,e)&&f(o,e,t[e]);return o};import"./modulepreload-polyfill.b7f2da20.js";import{W as P,P as M,S as b,i as S,Y as g,n as A,T as z,a3 as C,at as D,G as U,c as v,s as G,h as T,g as w,a as I,a4 as R,au as E,a7 as L,av as W,v as F,w as X,x as V,A as Y,d as j}from"./vendor.7fb6b1a4.js";var O="/playground1/assets/b2.0dc69ad7.png";class q{constructor(t){this.container=t,this.renderer=new P({antialias:!0}),this.renderer.setSize(t.offsetWidth,t.offsetHeight,!1),this.renderer.setPixelRatio(window.devicePixelRatio),t.append(this.renderer.domElement),this.camera=new M(45,t.offsetWidth/t.offsetHeight,.1,1e4),this.scene=new b,this.clock=new S,this.assets={},this.disposed=!1,this.tick=this.tick.bind(this),this.init=this.init.bind(this)}loadAssets(){return new Promise((t,e)=>{})}init(){this.tick()}getViewSizeAtDepth(t=0){const e=this.camera.fov*Math.PI/180,a=Math.abs((this.camera.position.z-t)*Math.tan(e/2)*2);return{width:a*this.camera.aspect,height:a}}dispose(){this.disposed=!0}onResize(){}update(){}render(){this.renderer.render(this.scene,this.camera)}tick(){if(this.disposed)return;if(Q(this.renderer)){const e=this.renderer.domElement;this.camera.aspect=e.clientWidth/e.clientHeight,this.camera.updateProjectionMatrix(),this.onResize()}const t=this.clock.getDelta();this.render(t),this.update(t),requestAnimationFrame(this.tick)}}function Q(o){const t=o.domElement,e=t.clientWidth,a=t.clientHeight,i=t.width!==e||t.height!==a;return i&&o.setSize(e,a,!1),i}const H={uDistortionX:new g(new A(80,3)),uDistortionY:new g(new A(-40,2.5))},Z=`
  #define PI 3.14159265358979
    uniform vec2 uDistortionX;
    uniform vec2 uDistortionY;
  
      float nsin(float val){
      return sin(val) * 0.5+0.5;
      }
    vec3 getDistortion(float progress){
          progress = clamp(progress, 0.,1.);
          float xAmp = uDistortionX.r;
          float xFreq = uDistortionX.g;
          float yAmp = uDistortionY.r;
          float yFreq = uDistortionY.g;
          return vec3( 
              xAmp * nsin(progress* PI * xFreq   - PI / 2.) ,
              yAmp * nsin(progress * PI *yFreq - PI / 2.  ) ,
              0.
          );
      }
  `,J={uniforms:H,vshader:Z};var K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABmklEQVQ4ja2Ty07bQBSGP1/GOLWdCCLUQFlGoqs8ReAhUF+k78QOiQ3qumKJWCSlqlBUR4SkLGon8oyxPdWYu5J2EfUsZnPO+eZc/mMBP4Em61liABLYWBOgbPOsmVwD3L95HMdBCA/LstBak+c5VVUuxa0AWATBO8LQp9kEz4MsgzRtkKYZUmb/BpjkTiek2xX0ei3a7QZxnHJxMef62mU20yglVwMcx61/7nY9jo4+0u8fEkUfmEyGnJyccXw8Ist8lDJj08sAIURddq/X5ODgkJ2dT8B7oug7/f6cy8sJ47EiSQT39/kywAxMCNja8tnc3AU6j55d2u0OrZbAdR/insx+DaiqCilhPJ4Tx0PgGzAHBoxGP7i9zVFKUxTFS9vA5ychmXXZ9gZVpbGsXwTBFCmHDAZfOD39yvl5wnSqyLLnISpTy+/XUvb9BtvbEXt7Dvv7phXBzY3i6ionjhV3dwll+VxBLeU3gAeITxD4hKFT9yylZrEoSNMFZflGTKsBL1vxsG2LPC/QelmF/+WYzBpna58zJH8ARoWiAIx+rgkAAAAASUVORK5CYII=";const y=new z,N=y.load(O),_=y.load(K);class ${constructor(t,e){this.app=t,this.options=e}init(){let t=this.app.scene;var e=10,a=10,i=30,s=Math.PI*2/i,n=.5,h=new G(2,3,1);const c=new T(16777215,1,200);c.position.set(0,0,-20),this.app.camera.add(c);let d=new w(new I(.2,32,32),new R({color:16777215}));c.add(d),t.add(new E(16777215,.2)),this.group=new L;for(let r=0;r<a*i;r++){let l=new w(h,new W({color:this.options.color}));l.position.set(Math.cos(s*r)*e,n*r,Math.sin(s*r)*e),this.group.add(l),l.rotation.y=-s*r}t.add(this.group)}update(t){this.options.rotateBlock&&this.group.children.forEach(e=>{e.rotation.y+=this.options.rotateBlock}),this.options.rotateCorck&&(this.group.rotation.y+=this.options.rotateCorck),this.group.children.forEach(function(e){})}}function tt(o){for(var t=new F,e=[],a=[],i,s=0;s<550;s++){var n=Math.random()*60-30,h=Math.random()*60-30,c=Math.random()*60-30;e.push(n,h,c)}t.setAttribute("position",new X(e,3)),i=[[[.3,.7,.9],N,.2],[[.3,.3,.8],_,.4]];for(var s=0;s<i.length;s++){var d=i[s][0],r=i[s][1],l=i[s][2];a[s]=new V({size:l,map:r,blending:Y,depthTest:!1,transparent:!0,opacity:.35}),a[s].color.setRGB(d[0],d[1],d[2]);var p=new j(t,a[s]);return p.rotation.x=Math.random()*6,p.rotation.y=Math.random()*6,p.rotation.z=Math.random()*6,o.add(p),p}}class et extends q{constructor(t){const e=u({container:document.getElementById("container"),length:400,width:20,roadWidth:9,islandWidth:2,nPairs:100,roadSections:3,color:"#0051c0",distortion:J,rotateCorck:0,rotateBlock:0},t);super(e.container);this.options=e,this.camera.position.z=0,this.camera.position.y=200,this.camera.rotateX(-Math.PI/2),C.to(this.camera.position,{y:50,duration:30,ease:"power1.inOut",yoyo:!0,repeat:-1}),this.scene.add(this.camera);const a=new D(this.camera);this.scene.add(a);const i=new U;i.add(this.camera.position,"x"),i.add(this.camera.position,"y"),i.add(this.camera.position,"z"),i.addFolder("Rotation"),i.add(this.camera.rotation,"x"),i.add(this.camera.rotation,"y"),i.add(this.camera.rotation,"z"),i.add(this.options,"rotateCorck",0,.02,.001),i.add(this.options,"rotateBlock",0,.02,.001),i.addColor(this.options,"color").onChange(n=>{this.spiral.group.children.forEach(h=>{h.material.color=new v(n)})}),this.spiral=new $(this,e);const s=new v("black");console.log(this.camera),console.log(this.camera.position),console.log(this.camera.rotation),this.scene.background=s,this.particles=tt(this.camera)}init(){this.spiral.init(),this.tick()}update(t){this.clock.elapsedTime,this.spiral.update(t),this.particles.rotation.y+=.001,this.particles.rotation.z+=.001}}const it=new et;it.init();
//# sourceMappingURL=d1.2f4fc208.js.map
