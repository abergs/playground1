{"version":3,"file":"sugarbreak.712679fd.js","sources":["../../sugarbreak/BasicThreeDemo.js","../../sugarbreak/smoke2.png","../../sugarbreak/config.js","../../sugarbreak/ball3.png","../../sugarbreak/Ball.js","../../sugarbreak/Modifiers.js","../../sugarbreak/brick.frag","../../sugarbreak/brick.vert","../../sugarbreak/ball1.png","../../sugarbreak/ball2.png","../../sugarbreak/hit1.m4a?url","../../sugarbreak/hit2.m4a?url","../../sugarbreak/hit3.m4a?url","../../sugarbreak/hit4.m4a?url","../../sugarbreak/hit5.m4a?url","../../sugarbreak/sounds.js","../../sugarbreak/utils.js","../../sugarbreak/Brick.js","../../sugarbreak/overlay.frag","../../sugarbreak/Overlay.js","../../sugarbreak/Padel.js","../../sugarbreak/smoke1.png","../../sugarbreak/Effects.js","../../sugarbreak/main.js"],"sourcesContent":["import * as THREE from \"three\";\r\n\r\n// import * as Stats from \"stats.js\";\r\n// var stats = new Stats();\r\n// document.body.appendChild( stats.dom );\r\n// stats.showPanel(0);\r\n\r\nexport class BasicThreeDemo {\r\n    constructor(container) {\r\n      this.container = container;\r\n      this.renderer = new THREE.WebGLRenderer({\r\n        antialias: true\r\n      });\r\n      this.renderer.setSize(container.offsetWidth, container.offsetHeight, false);\r\n      this.renderer.setPixelRatio(window.devicePixelRatio);\r\n  \r\n      container.append(this.renderer.domElement);\r\n  \r\n      \r\n      let width = container.offsetWidth;\r\n      let height = container.offsetHeight;\r\n      width = 100 * container.offsetWidth / container.offsetHeight;\r\n      height = 100 * container.offsetWidth / container.offsetHeight;\r\n\r\n      const aspectRatio = container.offsetWidth / container.offsetHeight;\r\n      const cameraWidth = 1000;\r\n      const cameraHeight = cameraWidth / aspectRatio;\r\n\r\n      this.camera = new THREE.OrthographicCamera(cameraWidth / - 2, cameraWidth / 2, cameraHeight / 2, cameraHeight / - 2, 0, 1000 );\r\n      // this.camera = new THREE.PerspectiveCamera(\r\n      //   75,\r\n      //   container.offsetWidth / container.offsetHeight,\r\n      //   10,\r\n      //   10000\r\n      // );\r\n      // this.camera.position.z = 1;\r\n      \r\n      \r\n\r\n      this.scene = new THREE.Scene();\r\n      this.scene.add(this.camera)\r\n      this.clock = new THREE.Clock();\r\n      this.assets = {};\r\n      this.disposed = false;\r\n      this.tick = this.tick.bind(this);\r\n      this.init = this.init.bind(this);\r\n    }\r\n    loadAssets() {\r\n      return new Promise((resolve, reject) => {\r\n        // const manager = new THREE.LoadingManager(resolve);\r\n        // this.text.load(manager);\r\n      });\r\n    }\r\n    init() {\r\n      this.tick();\r\n    }\r\n    getViewSizeAtDepth(depth = 0) {\r\n      const fovInRadians = (this.camera.fov * Math.PI) / 180;\r\n      const height = Math.abs(\r\n        (this.camera.position.z - depth) * Math.tan(fovInRadians / 2) * 2\r\n      );\r\n      return { width: height * this.camera.aspect, height };\r\n    }\r\n    dispose() {\r\n      this.disposed = true;\r\n    }\r\n    onResize() {}\r\n    update() {}\r\n    render() {\r\n      this.renderer.render(this.scene, this.camera);\r\n    }\r\n    tick() {\r\n      if (this.disposed) return;\r\n      // stats.begin()\r\n      if (resizeRendererToDisplaySize(this.renderer)) {\r\n        const canvas = this.renderer.domElement;\r\n        this.camera.aspect = canvas.clientWidth / canvas.clientHeight;\r\n        this.camera.updateProjectionMatrix();\r\n        this.onResize();\r\n      }\r\n      const delta = this.clock.getDelta();\r\n      this.render(delta);\r\n      this.update(delta);\r\n      // stats.end()\r\n      requestAnimationFrame(this.tick);\r\n    }\r\n  }\r\n  \r\n  function resizeRendererToDisplaySize(renderer) {\r\n    const canvas = renderer.domElement;\r\n    const width = canvas.clientWidth;\r\n    const height = canvas.clientHeight;\r\n    const needResize = canvas.width !== width || canvas.height !== height;\r\n    if (needResize) {\r\n      renderer.setSize(width, height, false);\r\n    }\r\n    return needResize;\r\n  }","export default \"data:image/png;base64,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\"","const aspectRatio = container.offsetWidth / container.offsetHeight;\r\nexport const worldWidth = 1000;\r\nexport const worldHeight = worldWidth / aspectRatio;\r\n","export default \"__VITE_ASSET__a882feb9__\"","import * as THREE from \"three\";\r\n\r\nconst loader = new THREE.TextureLoader();\r\n\r\nimport smokeUrl2 from \"./smoke2.png\";\r\nexport var smoke2 = loader.load(smokeUrl2);\r\n\r\nimport { worldWidth, worldHeight } from \"./config\";\r\nimport gsap from \"gsap\";\r\n\r\nimport ball3url from \"./ball3.png\";\r\nimport { Clock } from \"three\";\r\nexport const ball3 = loader.load(ball3url);\r\n\r\nexport class Ball {\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.vel = new THREE.Vector3(1, 1, 0);\r\n  }\r\n\r\n  revive() {\r\n    this.mesh.position.set(0, 60, 0);\r\n    this.mesh.material.color.set(0xffffff);\r\n  }\r\n\r\n  die() {\r\n    this.app.scene.remove(this.mesh);\r\n    this.mesh.removeFromParent();\r\n    this.geometry.dispose();\r\n    this.material.dispose();\r\n    this.geometry = null;\r\n    this.material = null;\r\n    \r\n    this.mesh = null;\r\n  }\r\n\r\n  hitBrick(brick) {\r\n    this.mesh.material.color =\r\n      brick.mesh.material.uniforms.uColor.value.clone();\r\n    this.mesh.material.color.multiplyScalar(1);\r\n    this.app.effects.showHit(brick.mesh.position);\r\n    gsap.fromTo(this.mesh.scale, { x: .5 }, { x: 1, duration: 0.1 });\r\n \r\n  }\r\n\r\n  init() {\r\n    this.geometry = new THREE.SphereGeometry(10, 32, 32);\r\n    this.material = new THREE.MeshBasicMaterial({\r\n      side: THREE.DoubleSide,\r\n      map: ball3,\r\n      \r\n    });\r\n    var mesh = new THREE.Mesh(this.geometry, this.material);\r\n    //cube.position.z = 15;\r\n    mesh.position.y = 60;\r\n    mesh.position.x = 0;\r\n    mesh.position.z = 0;\r\n    this.mesh = mesh;\r\n\r\n    // config\r\n    this.power = 1;\r\n\r\n    const smokematerial2 = new THREE.SpriteMaterial({ map: smoke2 });\r\n    this.smoke2 = new THREE.Sprite(smokematerial2);\r\n  \r\n    this.app.scene.add(this.smoke2);\r\n    this.app.scene.add(mesh);\r\n  }\r\n\r\n  bounce() {\r\n    const smokeOffset = Math.random() * 20;\r\n    this.smoke2.material.rotation = 10 * Math.random();\r\n    //this.smoke2.scale.set(40 - smokeOffset, 40 - smokeOffset, 1);\r\n    this.smoke2.position.copy(this.mesh.position);\r\n    this.smoke2.position.z = 5;\r\n\r\n    \r\n    gsap.fromTo(this.mesh.scale, { x: .2 }, { x: 1, duration: 0.1 });\r\n    var tl = gsap\r\n      .timeline()\r\n      .fromTo(this.smoke2.scale, {\r\n        x:0,\r\n        y: 0,\r\n        z:0\r\n      }, {\r\n        duration: 0.1,\r\n        x: 50 - smokeOffset,\r\n        y: 50 - smokeOffset,\r\n        z: 1,\r\n      })\r\n      .fromTo(this.smoke2.material,{opacity: 1}, {\r\n        duration: 0.2,\r\n        opacity: 0\r\n      },0);\r\n\r\n    // setTimeout(() => {\r\n    //   this.smoke2.scale.set(0);\r\n    // }, 100);\r\n  }\r\n  ticks = 0;\r\n  update(time) {\r\n    this.ticks++;\r\n    let speed = Math.min(3.0 + time * 0.04, 7);\r\n\r\n    let vel = this.vel;\r\n    let wOffset = 10 / 2;\r\n    let hOffset = 10 / 2;\r\n    let xPos = this.mesh.position.x;\r\n    let yPos = this.mesh.position.y;\r\n\r\n    // bounce on edges\r\n    if (\r\n      xPos + wOffset > worldWidth / 2 ||\r\n      this.mesh.position.x - wOffset < -worldWidth / 2\r\n    ) {\r\n      vel.reflect(new THREE.Vector3(1, 0, 0));\r\n      this.bounce();\r\n    }\r\n    if (yPos + hOffset > worldHeight / 2 || yPos - hOffset < -worldHeight / 2) {\r\n      vel.reflect(new THREE.Vector3(0, 1, 0));\r\n      this.bounce();\r\n    }\r\n\r\n    let movement = vel.clone().multiplyScalar(speed);\r\n    \r\n    // stop\r\n    if (xPos + wOffset > worldWidth / 2 || xPos - wOffset < -worldWidth / 2) {\r\n      //movement.set(0,0,0);\r\n    }\r\n\r\n    this.mesh.rotateZ(0.05);\r\n    this.mesh.position.add(movement);    \r\n    if((this.ticks % 2 == 0)){\r\n      this.app.effects.showClouds(1, this.mesh.position,50);    \r\n    }\r\n  }\r\n}\r\n","export class Modifiers {\r\n  init() {\r\n    this.startDate = new Date();\r\n\r\n  }\r\n\r\n  isBloodSugarLow() {\r\n    if (this.bloodSugar <= 4) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  isBloodSugarNormal() {\r\n    if (this.bloodSugar > 4 && this.bloodSugar < 10) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  isBloodSugarHigh() {\r\n    if (this.bloodSugar >= 10) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  getBloodSugar(time) {\r\n    //console.log(time, Math.sin(time));\r\n    return Math.max((Math.cos(time * .1) * 8.14) + (1.0 + Math.sin(time * .2)) * 7, 2);\r\n\r\n  }\r\n\r\n  update(time) {\r\n    this.bloodSugar = this.getBloodSugar(time);\r\n  }\r\n}\r\n","export const shader = `\r\nuniform vec3 uColor;\r\nuniform float uAlpha;\r\nvarying vec3 vPositionW;\r\nvarying vec3 vNormalW;\r\nvarying vec3 normals;\r\nvarying vec2 vUv;\r\nvoid main() {\r\n\tvec3 color = vec3(1., 1., 1.);\r\n\tvec3 viewDirectionW = normalize(cameraPosition - vPositionW);\r\n\tfloat fresnelTerm = dot(viewDirectionW, vNormalW);\r\n\tfresnelTerm = clamp(fresnelTerm,0.9, 2.0);\r\n\r\n\tcolor = uColor;\r\n\t\r\n\r\n\t// borders\r\n\t\r\n\t// if(vUv.x > .95) {\r\n\t// \tcolor = vec3(1., 0., 0.);\r\n\t// }\r\n\r\n\t// float b = step(vUv.x, 0.95);\t\r\n\t// color *= b;\r\n\t// b = step(0.05, vUv.x);\r\n\t// color *= b;\r\n\r\n\t//color.r *= vUv.x ;\r\n\t//color.r *= vPositionW.x;\r\n\t//color.g *= vUv.y;\r\n\r\n    gl_FragColor = vec4(color, uAlpha);\r\n    //gl_FragColor = vec4(uColor, 1.0);\r\n}\r\n`;\r\n\r\n","export const shader = `\r\nvarying vec3 vPositionW;\r\nvarying vec3 vNormalW;\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    vUv = uv;\r\n    vPositionW = vec3( vec4( position, 1.0 ) * modelMatrix);\r\n    vNormalW = normalize( vec3( vec4( normal, 0.0 ) * modelMatrix ) );\r\n    \r\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n`;","export default \"__VITE_ASSET__1a2ffa70__\"","export default \"__VITE_ASSET__466a70af__\"","export default \"__VITE_ASSET__edfa9731__\"","export default \"__VITE_ASSET__b10388c2__\"","export default \"__VITE_ASSET__401d0d66__\"","export default \"__VITE_ASSET__18e89af6__\"","export default \"__VITE_ASSET__3595b5da__\"","import { Howl } from \"howler\";\r\n\r\nimport s1 from  \"./hit1.m4a?url\";\r\nimport s2 from  \"./hit2.m4a?url\";\r\nimport s3 from  \"./hit3.m4a?url\";\r\nimport s4 from  \"./hit4.m4a?url\";\r\nimport s5 from  \"./hit5.m4a?url\";\r\n\r\nvar sounds = [\r\n  s1,\r\n  s2,\r\n  s3,\r\n  s4,\r\n  s5  \r\n];\r\n\r\nexport var howls = sounds.map(\r\n  (s) => new Howl({\r\n    src: s,\r\n    sprite: {\r\n      __default: [100, 1000],\r\n    },\r\n  })\r\n);\r\n","export const pickRandom = (arr) => {\r\n    if (Array.isArray(arr)) return arr[Math.floor(Math.random() * arr.length)];\r\n    return arr;\r\n  };\r\n  \r\n\r\n","import * as THREE from \"three\";\r\nimport { DoubleSide } from \"three\";\r\nimport { shader as brickfrag } from \"./brick.frag\";\r\nimport { shader as brickvert } from \"./brick.vert\";\r\nimport { worldWidth, worldHeight } from \"./config\";\r\n\r\nconst loader = new THREE.TextureLoader();\r\n\r\nimport url_ball1 from \"./ball1.png\";\r\nconst ball1 = loader.load(url_ball1);\r\nimport url_ball2 from \"./ball2.png\";\r\nconst ball2 = loader.load(url_ball2);\r\n\r\nimport { howls } from \"./sounds\";\r\nimport { pickRandom } from \"./utils\";\r\nimport { SpriteMaterial } from \"three\";\r\nimport { ShaderMaterial } from \"three\";\r\n\r\nimport gsap from \"gsap\";\r\n\r\nconst colors = [\"\", \"#fbff80\", \"#cc6cf5\", \"#80c6ff\", \"orange\"];\r\n\r\nexport class Brick {\r\n  constructor(app, brickPoints, rows, columns, row, column) {\r\n    this.app = app;\r\n    this.brickPoints = brickPoints;\r\n    this.rows = rows;\r\n    this.columns = columns;\r\n    this.row = row;\r\n    this.column = column;\r\n  }\r\n\r\n  init() {\r\n    const cstep = worldWidth / 10;\r\n    const rstep = (worldHeight / 2) * 3;\r\n    const bheight = 15;\r\n    const xpadding = 10;\r\n\r\n   \r\n    this.points = pickRandom(this.brickPoints);\r\n    this.life = this.points;\r\n    this.ability = this.getAbility();\r\n\r\n    this.reinit();\r\n\r\n\r\n    var geometry = new THREE.BoxBufferGeometry(cstep - xpadding, bheight, 1);\r\n    var material = new THREE.ShaderMaterial({\r\n      fragmentShader: brickfrag,\r\n      vertexShader: brickvert,\r\n      uniforms: {\r\n        uColor: new THREE.Uniform(new THREE.Color(this.config.color)),\r\n        uAlpha: new THREE.Uniform(1.0),\r\n        uTime: new THREE.Uniform(0.0),\r\n      },\r\n      transparent: true,\r\n      opacity: 1,\r\n      side: DoubleSide,\r\n      //wireframe: true\r\n    });\r\n    var mesh = new THREE.Mesh(geometry, material);\r\n    //cube.position.z = 15;\r\n    // depending on\r\n    mesh.position.y = worldHeight / 2 - bheight / 2 - 50;\r\n    mesh.position.y -= bheight * (this.row + 1) + 10 * this.row;\r\n\r\n    mesh.position.x = -worldWidth / 2 + cstep * this.column;\r\n    this.mesh = mesh;\r\n    this.group = new THREE.Group();\r\n    this.group.add(mesh);    \r\n\r\n    this.applyAbility();\r\n\r\n    // console.log(mesh.position.y);\r\n    this.app.scene.add(this.group);\r\n  }\r\n\r\n  applyAbility() {\r\n    if (this.ability) {\r\n      let texture = \"\";\r\n      if(this.ability === \"bomb-column\") {\r\n        texture = ball1;\r\n      } else if(this.ability === \"extra-ball\") {\r\n        texture = ball2;\r\n      }\r\n      const effectMaterial = new THREE.SpriteMaterial({ map: texture  });\r\n      this.meshEffect = new THREE.Sprite(effectMaterial);\r\n      this.meshEffect.scale.set(40, 40, 10);\r\n      this.meshEffect.position.copy(this.mesh.position);\r\n      this.meshEffect.position.z = 5;\r\n      this.meshEffect.material.opacity = 1.0;\r\n      this.group.add(this.meshEffect);\r\n    } else if (this.meshEffect) {\r\n      this.group.remove(this.meshEffect);\r\n      this.meshEffect.material.dispose();\r\n      this.meshEffect.mater = null;\r\n      this.meshEffect.geometry.dispose();\r\n      this.meshEffect.geometry = null;\r\n      this.meshEffect = null;\r\n      \r\n    }\r\n  }\r\n\r\n  reinit() {\r\n    let color = colors[this.points];\r\n    this.config = {\r\n      opacity: 1,\r\n      color: color\r\n    };\r\n  }\r\n\r\n  hit(power = 1) {\r\n    this.life -= power;\r\n    this.mesh.rotateZ(Math.random() * 0.2);\r\n    pickRandom(howls).play();\r\n\r\n    // if not active anymore\r\n    if (this.isDead()) {\r\n      this.destroy();\r\n    }\r\n\r\n    const ability = this.ability;\r\n    this.looseAbility();\r\n    return {\r\n      points: this.getPoints(),\r\n      ability: ability,\r\n    };\r\n  }\r\n\r\n  looseAbility() {\r\n    this.ability = null;\r\n    this.applyAbility();\r\n  }\r\n\r\n  getPoints() {\r\n    if (this.isDead()) {\r\n      return this.points;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.app.effects.showExplosions(1, this.mesh.position);\r\n    this.mesh.material.uniforms.uAlpha.value = 0.0;\r\n\r\n    gsap.to(this.config, { duration: 0.5, opacity: 0 });\r\n  }\r\n\r\n  isDead() {\r\n    return this.life < 1;\r\n  }\r\n\r\n  isActive() {\r\n    return this.life > 0;\r\n  }\r\n\r\n  allChildren(task) {\r\n    this.group.children.forEach((c) => {\r\n      if (c instanceof THREE.Object3D) {\r\n        task(c);\r\n      }\r\n    });\r\n  }\r\n\r\n  revive() {\r\n    this.life = this.points;\r\n    this.mesh.material.uniforms.uAlpha.value = 1.0;\r\n    this.mesh.rotation.z = 0;\r\n    this.ability = this.getAbility();\r\n    this.applyAbility();\r\n    // this.allChildren((c) => (c.visible = true));\r\n    this.config.opacity = 1;\r\n\r\n    // if(this.effect) {\r\n    //   this.meshEffect.position.copy(this.mesh.position);\r\n    //   this.meshEffect.position.z = 5;\r\n    //   this.meshEffect.material.opacity = 1;\r\n    // } else {\r\n    //   this.meshEffect.material.opacity = 0;\r\n    // }\r\n  }\r\n\r\n  getAbility() {\r\n    if (Math.random() < 0.9) {\r\n      return null;\r\n    }\r\n\r\n    const effects = [\"bomb-column\", \"extra-ball\"]; //  \"bomb-row\", \"ball-fire\", \"ball-power2\"\r\n    let effect = pickRandom(effects);\r\n    return effect;\r\n  }\r\n\r\n  update(time) {\r\n    this.time = time;\r\n    this.mesh.material.uniforms.uTime.value = time;\r\n    this.allChildren((c) => {\r\n      if (c.material instanceof SpriteMaterial) {\r\n        c.material.opacity = this.config.opacity;\r\n      } else if (c.material instanceof ShaderMaterial) {\r\n        if (c.material.uniforms.uPacity)\r\n          c.material.uniforms.uOpacity.value = this.config.opacity;\r\n      }\r\n    });\r\n  }\r\n}\r\n","export const shader = `\r\nuniform vec3 uColor;\r\nuniform float uAlpha;\r\nuniform vec2 uResolution;\r\nuniform float uTime;\r\nvarying vec3 vPositionW;\r\nvarying vec3 vNormalW;\r\nvarying vec2 vUv;\r\n\r\nfloat dist(vec2 p0, vec2 pf){return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));}\r\n\r\nvoid main() {\r\n\r\n    \r\n\t\t\tvec3 color = vec3(1., 1., 1.);\r\n\t\t\tvec3 viewDirectionW = normalize(cameraPosition - vPositionW);\r\n\t\t\tfloat fresnelTerm = .5 - dot(viewDirectionW, vNormalW);\r\n\t\t\tfresnelTerm = clamp(fresnelTerm,0.0, .9);\r\n\r\n\t\tvec2 sc = vPositionW.xy/uResolution;\r\n\t\tfloat c = clamp(sc.x, .9, 1.);\r\n\t\tfloat a = c;\r\n\t\tfloat circle = dist(uResolution*0.5, vPositionW.xy) * 0.002 + sin(uTime) * 0.1;\r\n\t\tfloat offset = .14 + sin(uTime * 2.) * 0.1;\r\n        gl_FragColor = vec4( uColor, (circle - offset) * uAlpha);\r\n    \r\n\t\r\n\r\n    //gl_FragColor = vec4(uColor, 1.0);\r\n}\r\n`;","import * as THREE from \"three\";\r\nimport gsap from \"gsap\";\r\nimport { shader as overlayfrag } from \"./overlay.frag\";\r\n\r\nimport { worldWidth, worldHeight } from \"./config\";\r\n\r\nexport class Overlay {\r\n  constructor(app) {\r\n    this.app = app;\r\n  }\r\n\r\n  init() {\r\n    var geometry = new THREE.PlaneGeometry(worldWidth, worldHeight);\r\n    // const texture = loader.load(textureUrl)\r\n    const brickvert = [\r\n      \"varying vec3 vPositionW;\",\r\n      \"varying vec3 vNormalW;varying vec2 vUv;\",\r\n\r\n      \"void main() {\",\r\n      \" vUv = uv;\",\r\n      \"\tvPositionW = vec3( vec4( position, 1.0 ) * modelMatrix);\",\r\n      \" vNormalW = normalize( vec3( vec4( normal, 0.0 ) * modelMatrix ) );\",\r\n\r\n      \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n      \"}\",\r\n    ].join(\"\\n\");\r\n    var material = new THREE.ShaderMaterial({      \r\n      fragmentShader: overlayfrag,\r\n      vertexShader: brickvert,\r\n      transparent: true,\r\n      uniforms: {\r\n        uReslution: new THREE.Uniform(new THREE.Vector2(worldWidth, worldHeight)),\r\n        uColor: new THREE.Uniform(new THREE.Color(\"#000000\")),\r\n        uAlpha: new THREE.Uniform(0.0),\r\n        uTime: new THREE.Uniform(0),\r\n      },\r\n    });\r\n\r\n    this.mesh = new THREE.Mesh(geometry, material);\r\n    // Put close to camera\r\n    this.mesh.position.z = 10;\r\n    this.app.scene.add(this.mesh);\r\n    this.isShown = false;\r\n  }\r\n\r\n  show() {\r\n    if (!this.isShown) {\r\n      this.isShown = true;\r\n      gsap.to(this.mesh.material.uniforms.uAlpha, { duration: 0.5, value: .7 });\r\n    }\r\n\r\n  }\r\n\r\n  hide() {\r\n    if (this.isShown) {\r\n      gsap.to(this.mesh.material.uniforms.uAlpha, {duration: 0.5, value: 0.0})  \r\n      this.isShown = false;\r\n    }\r\n  }\r\n\r\n  update(time) {\r\n    this.mesh.material.uniforms.uTime.value = time;\r\n  }\r\n}\r\n","import * as THREE from \"three\";\r\nimport { worldWidth, worldHeight } from \"./config\";\r\nimport gsap from \"gsap\";\r\n// import {physics} from \"popmotion\";\r\n  \r\n\r\nexport class Padel {\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.vel = new THREE.Vector3(0, 0, 0);\r\n  }\r\n\r\n  init() {\r\n    const padelHeight = 5;\r\n    var geometry = new THREE.BoxGeometry(200, 50, 10);\r\n    var material = new THREE.MeshBasicMaterial({\r\n      color: new THREE.Color(\"#56cc7d\"),\r\n    });\r\n    var mesh = new THREE.Mesh(geometry, material);\r\n    //cube.position.z = 15;\r\n    mesh.position.y = -worldHeight / 2 + padelHeight / 2;\r\n    mesh.position.x = 0;\r\n    this.mesh = mesh;\r\n\r\n    this.app.scene.add(mesh);\r\n\r\n    // listen on arrow left and right\r\n    let pressed = [];\r\n    const updateDirection = () => {\r\n      const key = pressed[0];\r\n      if (key == \"ArrowLeft\") {\r\n        this.vel.x = -1;\r\n      } else if (key == \"ArrowRight\") {\r\n        this.vel.x = 1;\r\n      } else {\r\n        this.vel.x = 0;\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", (e) => {\r\n      pressed.unshift(e.key);\r\n      updateDirection();\r\n    });\r\n\r\n    window.addEventListener(\"touchmove\", (e) => {\r\n      console.log(e);\r\n      var currentX = e.touches[0].clientX;\r\n      //this.mesh.position.x = Math.min(currentX - window.innerWidth / 2, window.innerWidth / 2);\r\n    });\r\n\r\n    // stop when key is released\r\n    window.addEventListener(\"keyup\", (e) => {\r\n      pressed = pressed.filter((key) => key !== e.key);\r\n      updateDirection();\r\n    });\r\n  }\r\n\r\n  hit() {\r\n    //sound.play();\r\n    this.mesh.material.color.set(new THREE.Color(\"lightBlue\"));\r\n      \r\n    \r\n    //this.mesh.scale.x = 1.4;\r\n    const tl = gsap.timeline();\r\n    tl.to(this.mesh.scale, { duration: 0.05, y: .3, ease: \"expo.out\", yoyo: true, repeat: 1 });\r\n    gsap.fromTo(this.mesh.scale, { x: .5 }, { x: 1, duration: 0.3 });\r\n\r\n    // tl.to(this.mesh.scale, { duration: 0.05, y: 1.0, ease: \"elastic.out(1, 0.3)\" });\r\n    // setTimeout(() => {\r\n    //   this.mesh.material.color.set(new THREE.Color(\"#56cc7d\"));\r\n    //   //this.mesh.scale.x = 1.0;\r\n    //   this.mesh.scale.y = 1;\r\n    // }, 100);\r\n  }\r\n\r\n  update(time, isbslow) {\r\n    let speed = 10.0;\r\n    let vel = this.vel;\r\n    let wOffset = 200 / 2;\r\n    let xPos = this.mesh.position.x;\r\n\r\n    if (isbslow) {\r\n      this.mesh.scale.x = .6;\r\n      this.mesh.material.color = new THREE.Color(\"#ff0000\");\r\n    } else {\r\n      this.mesh.scale.x = 1;\r\n      this.mesh.material.color = new THREE.Color(\"#56cc7d\");\r\n    }\r\n\r\n\r\n    // bounce\r\n    // if(xPos + wOffset > worldWidth/2 || this.cube.position.x - wOffset < -worldWidth/2) {\r\n    //   vel.negate();\r\n    // }\r\n    let movement = vel.clone().multiplyScalar(speed);\r\n    // stop\r\n    if (xPos + wOffset > worldWidth / 2 || xPos - wOffset < -worldWidth / 2) {\r\n      //movement.set(0,0,0);\r\n    }\r\n\r\n    this.mesh.position\r\n      .add(movement)\r\n      .clamp(\r\n        new THREE.Vector3(-worldWidth / 2 + wOffset, -worldHeight),\r\n        new THREE.Vector3(worldWidth / 2 - wOffset, worldHeight)\r\n      );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,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\"","import * as THREE from \"three\";\r\nimport gsap from \"gsap\";\r\n\r\n// smoke\r\nconst loader = new THREE.TextureLoader();\r\n\r\nimport smokeUrl from \"./smoke1.png\";\r\nconst smoke1 = loader.load(smokeUrl);\r\n\r\nimport smoke2url from \"./smoke2.png\";\r\nconst smoke2 = loader.load(smoke2url);\r\n\r\nexport class Effects {\r\n  explosions = [];\r\n  clouds = [];\r\n  lastExplosion = 0;\r\n  lastCloud = 0;\r\n\r\n  init(app) {\r\n    this.app = app;\r\n    this.setupExplosions();\r\n\r\n    this.setupClouds();\r\n  }\r\n\r\n  showClouds(amount, position, size, color) {\r\n    color = color || THREE.Color.white;\r\n\r\n    for (let i = 0; i < amount; i++) {\r\n      const expIndex = this.lastCloud++ % this.clouds.length;\r\n      \r\n      const cloud = this.clouds[expIndex];\r\n      cloud.position.copy(position);\r\n      // use color\r\n      cloud.material.color.set(color);\r\n      size = size || 40;\r\n\r\n      size += (size / 2) * Math.random();\r\n      \r\n      gsap.fromTo(cloud.material, {opacity: 1}, { duration: 0.7, opacity: 0 });\r\n      gsap.to(cloud.material, { duration: 1., rotation: Math.PI * Math.random() * Math.PI });\r\n      gsap.fromTo(cloud.scale, {x: 0, y: 0}, { duration: 1.0, x: size, y: size});\r\n    }\r\n  }\r\n\r\n  setupClouds(){\r\n    this.clouds = [];\r\n    const amount = 50;\r\n    let texture = smoke2;\r\n    const material = new THREE.SpriteMaterial({ map: texture});\r\n    for (let i = 0; i < amount; i++) {\r\n      const sprite = new THREE.Sprite(material.clone());\r\n      sprite.scale.set(0, 0, 0);      \r\n      sprite.opacity = 0;\r\n      this.clouds.push(sprite);\r\n      this.app.scene.add(sprite);\r\n    }\r\n  }\r\n\r\n  setupExplosions() {\r\n    this.explosions = [];\r\n    const amountOfExplosions = 5;\r\n    let texture = smoke1;\r\n    const material = new THREE.SpriteMaterial({ map: texture});\r\n    for (let i = 0; i < amountOfExplosions; i++) {\r\n      const sprite = new THREE.Sprite(material.clone());\r\n      sprite.scale.set(0, 0, 0);      \r\n      sprite.opacity = 0;\r\n      this.explosions.push(sprite);\r\n      this.app.scene.add(sprite);\r\n    }\r\n  }\r\n\r\n  showHit(position) {\r\n    let pos = position.clone();\r\n    pos.z = 1;\r\n    this.showExplosions(1, pos, 40, THREE.Color.red);\r\n  }\r\n\r\n  showExplosions(amount, position, size, color) {\r\n    color = color || THREE.Color.white;\r\n    for (let i = 0; i < amount; i++) {\r\n      const expIndex = this.lastExplosion++ % this.explosions.length;\r\n      \r\n      const explosion = this.explosions[expIndex];\r\n      explosion.position.copy(position);\r\n      // use color\r\n      explosion.material.color.set(color);\r\n      size = size || 40;\r\n\r\n      size += (size / 2) * Math.random();\r\n      \r\n      gsap.fromTo(explosion.material, {opacity: 1}, { duration: 0.7, opacity: 0 });\r\n      gsap.to(explosion.material, { duration: 1., rotation: Math.PI * Math.random() * Math.PI });\r\n      gsap.fromTo(explosion.scale, {x: 0, y: 0}, { duration: 1.0, x: size, y: size});\r\n    }\r\n  }\r\n}","import \"./style.css\";\r\n\r\n//import './style.css'\r\nimport * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n//import '../shared/OrbitControls.js'\r\nimport * as dat from \"dat.gui\";\r\n\r\nimport { BasicThreeDemo } from \"./BasicThreeDemo\";\r\nimport { Vector3 } from \"three\";\r\n\r\nimport { Ball } from \"./Ball\";\r\nimport { Modifiers } from \"./Modifiers\";\r\nimport { Brick } from \"./Brick\";\r\nimport { Overlay } from \"./Overlay\";\r\nimport { Padel } from \"./Padel\";\r\n\r\nimport { worldWidth, worldHeight } from \"./config\";\r\nimport { howls } from \"./sounds\";\r\nimport { Effects } from \"./Effects\";\r\n\r\nexport class App extends BasicThreeDemo {\r\n  constructor(inoptions) {\r\n    const options = {\r\n      container: document.getElementById(\"container\"),\r\n      // length: 400,\r\n      // width: 20,\r\n      // roadWidth: 9,\r\n      // islandWidth: 2,\r\n      // nPairs: 100,\r\n      // roadSections: 3,\r\n      // color: \"#111111\",\r\n      // distortion,\r\n      // ...inoptions,\r\n    };\r\n    super(options.container);\r\n    this.options = options;\r\n\r\n    this.camera.position.z = 10;\r\n    this.camera.position.y = 0;\r\n    this.camera.rotation.z = 0;\r\n    // this.camera.position.x = 0;\r\n\r\n    // const helper = new THREE.CameraHelper( this.camera );\r\n    // this.cameraHelper = helper;\r\n    // this.scene.add( helper );\r\n\r\n    const effects = new Effects();\r\n    this.effects = effects;\r\n    effects.init(this);\r\n\r\n    this.modifiers = new Modifiers();\r\n    this.ui = {\r\n      bs: document.getElementById(\"bs\"),\r\n      bstext: document.querySelector(\"#bs .text\"),\r\n    };\r\n\r\n    let colors1 = [\"#ff0000\", \"#00ff00\", \"#0000ff\"];\r\n    let colors2 = [\"#ff0000\", \"#00ff00\", \"#0000ff\"];\r\n\r\n    colors1 = [\"#fbc50b\", \"#de5d00\", \"#f9f5d6\"];\r\n    colors2 = [\"#eb6333\", \"#b1d5de\", \"#182c37\"];\r\n\r\n    colors1 = [\"#0CECDD\", \"#FFF338\", \"#FF67E7\", \"#C400FF\"];\r\n    colors2 = [\"#dbdcad\", \"#2FA4FF\", \"#00FFDD\", \"#E8FFC2\"];\r\n\r\n    let padel = new Padel(this);\r\n    padel.init();\r\n    this.padel = padel;\r\n\r\n    const startball = new Ball(this);\r\n    startball.init();\r\n\r\n    this.balls = [startball];\r\n\r\n    this.overlay = new Overlay(this);\r\n    this.overlay.init();\r\n\r\n    this.bricks = [];\r\n    this.points_record = 0;\r\n\r\n    this.hits = 0;\r\n    this.hits_last = 0;\r\n    this.hits_rate = 0;\r\n\r\n    const rows = 6;\r\n    const columns = 10;\r\n\r\n    const brickPoints = [1, 1, 1, 1, 2, 2, 2, 3, 3, 4, 4];\r\n\r\n    for (let row = 0; row < rows; row++) {\r\n      for (let column = 0; column < columns; column++) {\r\n        const brick = new Brick(this, brickPoints, rows, columns, row, column);\r\n        brick.init();\r\n        this.bricks.push(brick);\r\n      }\r\n    }\r\n\r\n    this.scene.background = new THREE.Color(\"pink\");\r\n    // const axesHelper = new THREE.AxesHelper(5);\r\n    // this.scene.add(axesHelper);\r\n  }\r\n\r\n  init() {\r\n    this.points = 0;\r\n    this.points_record = localStorage.getItem(\"points_record\");\r\n    this.updateScores();\r\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    this.controls.enabled = false;\r\n\r\n    this.tick();\r\n  }\r\n\r\n  updateScores() {\r\n    document.getElementById(\"last_score\").innerText = this.points_record;\r\n    document.getElementById(\"score\").innerText = this.points;\r\n  }\r\n\r\n  hitsFloor(ball) {\r\n    return ball.mesh.position.y < -worldHeight / 2 + 10;\r\n  }\r\n\r\n  updateBs(time, isbslow) {\r\n    // every 2 second\r\n    var bs = this.modifiers.getBloodSugar(time);\r\n    this.ui.bstext.innerText = bs.toFixed(1);\r\n\r\n    if (isbslow) {\r\n      this.overlay.show();\r\n      //howls.forEach((s) => s.rate(0.7));\r\n      this.ui.bs.classList.add(\"low\");\r\n    } else {\r\n      this.overlay.hide();\r\n      //howls.forEach((s) => s.rate(1.0));\r\n      this.ui.bs.classList.remove(\"low\");\r\n    }\r\n\r\n    const bsnormal = this.modifiers.isBloodSugarNormal();\r\n    if (bsnormal) {\r\n      this.ui.bs.classList.add(\"normal\");\r\n    } else {\r\n      this.ui.bs.classList.remove(\"normal\");\r\n    }\r\n\r\n    const bshigh = this.modifiers.isBloodSugarHigh();\r\n    if (bshigh) {\r\n      this.ui.bs.classList.add(\"high\");\r\n    } else {\r\n      this.ui.bs.classList.remove(\"high\");\r\n    }\r\n  }\r\n\r\n  hitBrick(brick, power, newBalls) {\r\n    var result = brick.hit(1);\r\n\r\n    // need a better way to apply this\r\n    if (result?.ability == \"bomb-column\") {\r\n      this.bricks.forEach((b) => {\r\n        if (b.column == brick.column) {\r\n          // we need to handle this result\r\n          const bombpower = 10;\r\n          this.hitBrick(b, bombpower, newBalls);\r\n        }\r\n      });\r\n    } else if (result?.ability == \"extra-ball\") {\r\n      const newBall = new Ball(this);\r\n      newBall.init();\r\n      newBalls.push(newBall);\r\n      console.log(\"new ball\", this.balls);\r\n    }\r\n\r\n    if (result?.points > 0) {\r\n      this.hits++;\r\n\r\n      setTimeout(() => {\r\n        brick.revive();\r\n      }, 40000);\r\n      this.points += result.points;\r\n      this.shake2 = true;\r\n      setTimeout(() => {\r\n        this.shake2 = false;\r\n      }, 200);\r\n    }\r\n    document.getElementById(\"score\").innerText = this.points;\r\n  }\r\n\r\n  ballUpdate(ball, time, newBalls) {\r\n    ball.update(time);\r\n      if (this.hitsFloor(ball)) {\r\n        // remove?\r\n        if (ball != this.balls[0]) {\r\n          ball.die();\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // BOUNCE ON PADEL\r\n      if (this.isBallAlignedWithPaddle(ball) && ball.vel.y < 0) {\r\n        if (this.padel.vel.x < 0 && ball.vel.x > 0) {\r\n          ball.vel.negate();\r\n        } else if (this.padel.vel.x > 0 && ball.vel.x < 0) {\r\n          ball.vel.negate();\r\n        } else {\r\n          ball.vel.reflect(new Vector3(0, 1, 0));\r\n        }\r\n\r\n        this.padel.hit();\r\n        ball.bounce();\r\n\r\n        // //this.shake = true;\r\n        // setTimeout(() => {\r\n        //   this.shake = false;\r\n        // }, 500);\r\n      }\r\n\r\n      // HIT BRICK\r\n      let brick = this.isBallAlignedWithBrick(ball);\r\n      if (brick) {\r\n        ball.hitBrick(brick);\r\n        ball.vel.reflect(new Vector3(0, 1, 0));\r\n        this.hitBrick(brick,ball.power, newBalls);\r\n      }\r\n\r\n      return true;\r\n  }\r\n\r\n  update(delta) {\r\n    let time = this.clock.elapsedTime;\r\n    this.modifiers.update(time);\r\n\r\n    const isbslow = this.modifiers.isBloodSugarLow();\r\n\r\n    this.updateBs(time, isbslow);\r\n    this.overlay.update(time);\r\n\r\n    // every 2 second\r\n    if (time % 2 === 0) {\r\n      this.hits_rate = Math.max(1, this.hits - this.hits_last);\r\n    }\r\n\r\n    this.padel.update(time, isbslow);\r\n\r\n    let newBalls = [];\r\n    this.balls = this.balls.filter((ball) => {\r\n      return this.ballUpdate(ball, time, newBalls);\r\n    });\r\n\r\n    // add newBalls to this.balls\r\n    this.balls = this.balls.concat(newBalls);\r\n\r\n    if (this.balls.length == 0) {\r\n      // DIE AND RESET GAME\r\n      //this.die();\r\n    }\r\n\r\n    this.bricks.forEach((b) => {\r\n      b.update(time);\r\n    });\r\n\r\n    //this.camera.rotateOnAxis(new THREE.Vector3(0, 1, 0), 0.00001);\r\n    //this.camera.rotateZ(.001);\r\n\r\n    if (this.shake) {\r\n      this.camera.rotation.z = Math.sin(time * 100) * 0.02;\r\n    } else if (this.shake2) {\r\n      this.camera.rotation.z = Math.sin(time * 100) * 0.005;\r\n    } else {\r\n      this.camera.rotation.z = 0;\r\n    }\r\n\r\n    // console.log(this.isBallAlignedWithPaddle());\r\n  }\r\n\r\n  die() {\r\n    this.balls.forEach((ball) => {\r\n      ball.mesh.material.color = new THREE.Color(\"#000000\");\r\n    });\r\n\r\n    const myPoints = this.points;\r\n    if (myPoints > this.points_record) {\r\n      console.log(\"score\", myPoints, this.points_record);\r\n      this.points_record = myPoints;\r\n      localStorage.setItem(\"points_record\", this.points_record);\r\n      this.updateScores();\r\n    }\r\n\r\n    this.clock = new THREE.Clock();\r\n\r\n    // DEATH\r\n    setTimeout(() => {\r\n      this.points = 0;\r\n      this.updateScores();\r\n      this.reviveAll();\r\n    }, 40000);\r\n  }\r\n\r\n  reviveAll() {\r\n    this.bricks.forEach((brick) => {\r\n      brick.revive();\r\n    });\r\n    this.balls.forEach(ball => {\r\n    ball.revive();  \r\n    });    \r\n  }\r\n\r\n  isBallAlignedWithBrick = (ball) => {\r\n    const ballX = ball.mesh.position.x;\r\n    const ballY = ball.mesh.position.y;\r\n\r\n    return this.bricks\r\n      .filter((b) => b.isActive())\r\n      .find((brick) => {\r\n        const paddleX = brick.mesh.position.x;\r\n        const halfPaddleWidth = brick.mesh.geometry.parameters.width / 2;\r\n\r\n        const paddleY = brick.mesh.position.y;\r\n        const halfPaddleHeight = brick.mesh.geometry.parameters.height / 2;\r\n\r\n        const isXAligned = ballX > paddleX - halfPaddleWidth && ballX < paddleX + halfPaddleWidth;\r\n        const isYAligned = ballY < paddleY + halfPaddleHeight && ballY > paddleY - halfPaddleHeight;\r\n\r\n        if (isXAligned && isYAligned) {\r\n          return brick;\r\n        }\r\n\r\n        return false;\r\n      });\r\n  };\r\n  isBallAlignedWithPaddle(ball) {\r\n    const ballX = ball.mesh.position.x;\r\n    const paddleX = this.padel.mesh.position.x;\r\n    const halfPaddleWidth = this.padel.mesh.geometry.parameters.width / 2;\r\n\r\n    const ballY = ball.mesh.position.y;\r\n    const paddleY = this.padel.mesh.position.y;\r\n    const halfPaddleHeight = this.padel.mesh.geometry.parameters.height / 2;\r\n\r\n    const bonusZone = this.padel.mesh.geometry.parameters.height;\r\n\r\n    const isXAligned = ballX > paddleX - halfPaddleWidth - bonusZone && ballX < paddleX + halfPaddleWidth + bonusZone;\r\n    const isYAligned = ballY < paddleY + halfPaddleHeight && ballY > paddleY;\r\n    return isXAligned && isYAligned;\r\n  }\r\n}\r\n\r\nconst a = new App();\r\na.init();\r\n"],"names":["THREE.WebGLRenderer","THREE.OrthographicCamera","THREE.Scene","THREE.Clock","loader","THREE.TextureLoader","smoke2","smokeUrl2","THREE.Vector3","gsap","THREE.SphereGeometry","THREE.MeshBasicMaterial","THREE.DoubleSide","THREE.Mesh","THREE.SpriteMaterial","THREE.Sprite","shader","Howl","THREE.BoxBufferGeometry","THREE.ShaderMaterial","brickfrag","brickvert","THREE.Uniform","THREE.Color","THREE.Group","THREE.Object3D","THREE.PlaneGeometry","overlayfrag","THREE.Vector2","THREE.BoxGeometry"],"mappings":"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"}