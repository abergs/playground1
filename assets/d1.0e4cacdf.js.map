{"version":3,"file":"d1.0e4cacdf.js","sources":["../../d1/BasicThreeDemo.js","../../d1/b2.png","../../d1/sprite1.png","../../d1/gui.js","../../d1/Spiral.js","../../d1/allParticles.js","../../d1/main.js"],"sourcesContent":["import * as THREE from \"three\";\r\n\r\n// import * as Stats from \"stats.js\";\r\n// var stats = new Stats();\r\n// document.body.appendChild( stats.dom );\r\n// stats.showPanel(0);\r\n\r\nexport class BasicThreeDemo {\r\n    constructor(container) {\r\n      this.container = container;\r\n      this.renderer = new THREE.WebGLRenderer({\r\n        antialias: true\r\n      });\r\n      this.renderer.setSize(container.offsetWidth, container.offsetHeight, false);\r\n      this.renderer.setPixelRatio(window.devicePixelRatio);\r\n  \r\n      container.append(this.renderer.domElement);\r\n  \r\n      this.camera = new THREE.PerspectiveCamera(\r\n        45,\r\n        container.offsetWidth / container.offsetHeight,\r\n        0.1,\r\n        300\r\n      );\r\n      this.scene = new THREE.Scene();\r\n  \r\n      this.clock = new THREE.Clock();\r\n      this.assets = {};\r\n      this.disposed = false;\r\n      this.tick = this.tick.bind(this);\r\n      this.init = this.init.bind(this);\r\n    }\r\n    loadAssets() {\r\n      return new Promise((resolve, reject) => {\r\n        // const manager = new THREE.LoadingManager(resolve);\r\n        // this.text.load(manager);\r\n      });\r\n    }\r\n    init() {\r\n      this.tick();\r\n    }\r\n    getViewSizeAtDepth(depth = 0) {\r\n      const fovInRadians = (this.camera.fov * Math.PI) / 180;\r\n      const height = Math.abs(\r\n        (this.camera.position.z - depth) * Math.tan(fovInRadians / 2) * 2\r\n      );\r\n      return { width: height * this.camera.aspect, height };\r\n    }\r\n    dispose() {\r\n      this.disposed = true;\r\n    }\r\n    onResize() {}\r\n    update() {}\r\n    render() {\r\n      this.renderer.render(this.scene, this.camera);\r\n    }\r\n    tick() {\r\n      if (this.disposed) return;\r\n      //stats.begin()\r\n      if (resizeRendererToDisplaySize(this.renderer)) {\r\n        const canvas = this.renderer.domElement;\r\n        this.camera.aspect = canvas.clientWidth / canvas.clientHeight;\r\n        this.camera.updateProjectionMatrix();\r\n        this.onResize();\r\n      }\r\n      const delta = this.clock.getDelta();\r\n      this.render(delta);\r\n      this.update(delta);\r\n      //stats.end()\r\n      requestAnimationFrame(this.tick);\r\n    }\r\n  }\r\n  \r\n  function resizeRendererToDisplaySize(renderer) {\r\n    const canvas = renderer.domElement;\r\n    const width = canvas.clientWidth;\r\n    const height = canvas.clientHeight;\r\n    const needResize = canvas.width !== width || canvas.height !== height;\r\n    if (needResize) {\r\n      renderer.setSize(width, height, false);\r\n    }\r\n    return needResize;\r\n  }","export default \"__VITE_ASSET__0dc69ad7__\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABmklEQVQ4ja2Ty07bQBSGP1/GOLWdCCLUQFlGoqs8ReAhUF+k78QOiQ3qumKJWCSlqlBUR4SkLGon8oyxPdWYu5J2EfUsZnPO+eZc/mMBP4Em61liABLYWBOgbPOsmVwD3L95HMdBCA/LstBak+c5VVUuxa0AWATBO8LQp9kEz4MsgzRtkKYZUmb/BpjkTiek2xX0ei3a7QZxnHJxMef62mU20yglVwMcx61/7nY9jo4+0u8fEkUfmEyGnJyccXw8Ist8lDJj08sAIURddq/X5ODgkJ2dT8B7oug7/f6cy8sJ47EiSQT39/kywAxMCNja8tnc3AU6j55d2u0OrZbAdR/insx+DaiqCilhPJ4Tx0PgGzAHBoxGP7i9zVFKUxTFS9vA5ychmXXZ9gZVpbGsXwTBFCmHDAZfOD39yvl5wnSqyLLnISpTy+/XUvb9BtvbEXt7Dvv7phXBzY3i6ionjhV3dwll+VxBLeU3gAeITxD4hKFT9yylZrEoSNMFZflGTKsBL1vxsG2LPC/QelmF/+WYzBpna58zJH8ARoWiAIx+rgkAAAAASUVORK5CYII=\"","import * as dat from \"dat.gui\";\r\n\r\nexport const gui = new dat.GUI();\r\n","import * as THREE from \"three\";\r\nimport gsap from \"gsap\";\r\nimport data from \"./flipsorted.json\";\r\nimport { TextGeometry } from \"three/examples/jsm/geometries/TextGeometry\";\r\nimport { FontLoader } from \"three/examples/jsm/loaders/FontLoader\";\r\nconst tloader = new FontLoader();\r\nimport fontUrl from \"three/examples/fonts/helvetiker_regular.typeface.json?url\";\r\nexport const fontPromise = tloader.loadAsync(fontUrl);\r\nimport { gui } from \"./gui\";\r\n\r\nexport class Spiral {\r\n  constructor(app, options) {\r\n    this.app = app;\r\n    this.options = options;\r\n  }\r\n\r\n  getSpiralPositions(radius, turns, objPerTurn, heightStep) {\r\n    const angleStep = (Math.PI * 2) / objPerTurn;\r\n\r\n    const positions = [];\r\n    for (let i = 0; i < turns * objPerTurn; i++) {\r\n      const pos = new THREE.Vector3(Math.cos(angleStep * i) * radius, heightStep * i, Math.sin(angleStep * i) * radius);\r\n      positions.push(pos);\r\n    }\r\n\r\n    return positions;\r\n  }\r\n\r\n  async init() {\r\n    const font = await fontPromise;\r\n\r\n    let scene = this.app.scene;\r\n    // scene.add(new THREE.GridHelper(20, 10));\r\n    var radius = 10;\r\n    var turns = data.length / 30;\r\n    var objPerTurn = 30;\r\n\r\n    var angleStep = (Math.PI * 2) / objPerTurn;\r\n    var heightStep = 0.5;\r\n    const positions = this.getSpiralPositions(radius, turns, objPerTurn, heightStep);\r\n\r\n    this.group = new THREE.Group();\r\n    this.txts = [];\r\n\r\n    var geom = new THREE.BoxBufferGeometry(2, 3, 1);\r\n    var sphereGeom = new THREE.SphereBufferGeometry(0.2, 32, 32);\r\n\r\n    const light = new THREE.PointLight(0xffffff, 1, 200);\r\n    light.position.set(0, 0, -20);\r\n    this.app.camera.add(light);\r\n\r\n    // create boxes from positions\r\n    for (let i = 0; i < positions.length; i++) {\r\n      let itemInData = data[i];\r\n      let color = \"#000\";\r\n      let colorOption = \"\";\r\n      const perf = itemInData?.performance_criteria_value;\r\n      if (perf < 15) {\r\n        color = this.options.color1;\r\n        colorOption = \"color1\";\r\n      } else if (perf < 30) {\r\n        color = this.options.color2;\r\n        colorOption = \"color2\";\r\n      } else {\r\n        color = this.options.color3;\r\n        colorOption = \"color3\";\r\n      }\r\n\r\n      // create boxes\r\n      let plane = new THREE.Mesh(\r\n        geom,\r\n\r\n        new THREE.MeshLambertMaterial({\r\n          transparent: true,\r\n          color: new THREE.Color(color),\r\n          opacity: 1,\r\n        })\r\n      );\r\n\r\n      plane.userData.colorOption = colorOption;\r\n\r\n      // position\r\n      const pos = positions[i];\r\n      plane.position.copy(pos);\r\n      plane.userData.oPosition = plane.position.clone();\r\n\r\n      // create sphere\r\n      let sphereColor = gsap.utils.random(Object.entries(this.options.eventColors));\r\n\r\n      let sphere = new THREE.Mesh(\r\n        sphereGeom,\r\n        new THREE.MeshLambertMaterial({\r\n          color: new THREE.Color(sphereColor[1]),\r\n          userData: {\r\n            eventColors: sphereColor[0],            \r\n          },\r\n        })\r\n      );\r\n      \r\n\r\n      let randomOffset = gsap.utils.random(0.3, 0.9, 0.1);\r\n      let smallRadius = radius * randomOffset;\r\n      sphere.position.set(Math.cos(angleStep * i) * smallRadius, heightStep * i, Math.sin(angleStep * i) * smallRadius);\r\n      sphere.userData.oPosition = sphere.position.clone();\r\n\r\n      this.group.add(sphere);\r\n\r\n      // SETUP TEXT\r\n      if (i % objPerTurn === 0) {\r\n        const string = itemInData.date.toLocaleString(\"default\", { month: \"long\" });\r\n        const geometry = new TextGeometry(string, {\r\n          font: font,\r\n          size: 1,\r\n          height: 1,\r\n          curveSegments: 12,\r\n          bevelEnabled: false,\r\n          bevelThickness: 10,\r\n          bevelSize: 1,\r\n          bevelOffset: 0,\r\n          bevelSegments: 5,\r\n        });\r\n        let txt = new THREE.Mesh(\r\n          geometry,\r\n          new THREE.MeshBasicMaterial({\r\n            color: new THREE.Color(this.options.txtColor),\r\n            opacity: 1,\r\n            transparent: true,\r\n          })\r\n        );\r\n        txt.userData[itemInData];\r\n        txt.position.copy(plane.position);\r\n        this.txts.push(txt);\r\n        // txt.position.set(20, 0, 0);\r\n        // txt.lookAt(this.app.camera.position);\r\n      }\r\n\r\n      // rotation\r\n      this.group.add(plane);\r\n      plane.rotation.y = -angleStep * i + Math.PI / 2;\r\n      // scene.add(plane);\r\n    }\r\n    gui.__folders[\"Other colors\"].addColor(this.options, \"txtColor\").onChange((v) => {\r\n      this.txts.forEach((txt) => {\r\n        txt.material.color = new THREE.Color(v);\r\n      });\r\n    });\r\n\r\n    // SETUP TEXT\r\n    this.txts.forEach((txt) => {\r\n      txt.position.x = -5;\r\n      // txt.position.y = 60;\r\n      txt.position.z = 5;\r\n      txt.rotation.x = Math.PI * 1.5;\r\n      this.app.scene.add(txt);\r\n    });\r\n\r\n    // TEXT ANIMATIONS\r\n    gsap.from(\r\n      this.txts.map((t) => t.material),\r\n      { opacity: 0, duration: 3, delay: 4 }\r\n    );\r\n    gsap.from(\r\n      this.txts.map((t) => t.position),\r\n      {\r\n        z: 100,\r\n        duration: 1,\r\n        delay: 3,\r\n        stagger: {\r\n          amount: 1,\r\n          from: \"random\",\r\n        },\r\n      }\r\n    );\r\n\r\n    // gsap.from(\r\n    //   [this.group.children.map(c => c.material)],\r\n    //   {duration: .3, opacity: 0, delay: 1, stagger: {\r\n    //   each: 0.001,\r\n    //   from: \"end\"\r\n    // }});\r\n    // this.introAnimation = gsap.from([this.group.children.map((c) => c.position)], {\r\n    //   duration: 4,\r\n    //   x: \"random(-1000, 1000, 5)\",\r\n    //   y: \"random(-1000, 1000, 5)\",\r\n    //   z: \"random(-1000, 1000, 5)\",\r\n    //   stagger: {\r\n    //     amount: 2,\r\n    //     from: \"random\",\r\n    //   },\r\n    // });\r\n    scene.add(this.group);\r\n    this.explode();\r\n  }\r\n\r\n  objectInFrustum = [];\r\n\r\n  explode() {\r\n    // remove objects from frustum\r\n    const positions = this.group.children.map((c) => c.position);\r\n    // console.log(\"Explode\", positions);\r\n   \r\n    \r\n    gsap.to(positions, {\r\n      duration: 4,\r\n      stagger: {\r\n        amount: 2,\r\n        from: \"random\",\r\n      },      \r\n      x: \"random(-100, 100, 5)\",\r\n      y: (i, target, targets) => target.y + gsap.utils.random(-100,100, 5),\r\n      z: \"random(-100, 100, 5)\",\r\n      onComplete: () => {\r\n          console.log(\"done\");\r\n        this.objectInFrustum = [];\r\n      }\r\n \r\n});\r\n    \r\n  }\r\n\r\n  update(time) {\r\n    if (this.options.rotateBlock) {\r\n      this.group.children.forEach((child) => {\r\n        child.rotation.y += this.options.rotateBlock;\r\n      });\r\n    }\r\n\r\n    if (this.options.rotateCorck) {\r\n      this.group.rotation.y += this.options.rotateCorck;\r\n    }\r\n\r\n    var frustum = new THREE.Frustum();\r\n    frustum.setFromProjectionMatrix(new THREE.Matrix4().multiplyMatrices(this.app.camera.projectionMatrix, this.app.camera.matrixWorldInverse));\r\n\r\n    // console.log(frustum);\r\n    // if(this.introAnimation.progress() == 1) {\r\n    this.group.children.forEach((c) => {\r\n      var p = c.position;\r\n      // console.log(p.y,p);\r\n      //p.y = Math.max(c.position.y, this.app.camera.position.y) ;\r\n      // console.log(p.y);\r\n      if (frustum.containsPoint(c.userData.oPosition) && this.objectInFrustum.indexOf(c) === -1) {\r\n        // console.log(\"Intersects at\", c.position,c.userData.oPosition.y,c);\r\n\r\n        this.objectInFrustum.push(c);\r\n        gsap.to(c.position, {\r\n            duration: 5,\r\n            x: c.userData.oPosition.x,\r\n            y: c.userData.oPosition.y,\r\n            z: c.userData.oPosition.z\r\n        });\r\n      }\r\n    });\r\n    // if(this.app.camera.frustum.containsPoint(this.group.position)) {\r\n    //   this.group.children.forEach((child) => {\r\n    //     child.material.opacity = 1;\r\n    //   });\r\n    // }\r\n  }\r\n}\r\n","import * as THREE from \"three\";\r\nimport { texBlur, texBlur2 } from \"./main\";\r\n\r\nexport function particles(scene) {\r\n  var geometry = new THREE.BufferGeometry();\r\n  var vertices = [];\r\n  var materials = [], parameters;\r\n  for (var i = 0; i < 550; i++) {\r\n    var x = Math.random() * 60 - 30;\r\n    var y = Math.random() * 60 - 30;\r\n    var z = Math.random() * 60 - 30;\r\n    vertices.push(x, y, z);\r\n  }\r\n  geometry.setAttribute(\"position\", new THREE.Float32BufferAttribute(vertices, 3));\r\n  parameters = [\r\n    [[0.3, 0.7, 0.9], texBlur, 0.2],\r\n    [[0.3, 0.3, 0.8], texBlur2, 0.4],\r\n  ];\r\n\r\n  let allParticles = [];\r\n  for (var i = 0; i < parameters.length; i++) {\r\n    var color = parameters[i][0];\r\n    var sprite = parameters[i][1];\r\n    var size = parameters[i][2];\r\n    materials[i] = new THREE.PointsMaterial({ size: size, map: sprite, blending: THREE.AdditiveBlending, depthTest: false, transparent: true, opacity: 0.35 });\r\n    materials[i].color.setRGB(color[0], color[1], color[2]);\r\n    var particles = new THREE.Points(geometry, materials[i]);\r\n    particles.rotation.x = Math.random() * 6;\r\n    particles.rotation.y = Math.random() * 6;\r\n    particles.rotation.z = Math.random() * 6;\r\n\r\n    allParticles.push(particles);\r\n    scene.add(particles);\r\n\r\n  }\r\n\r\n  return allParticles;\r\n\r\n}\r\n","import \"./style.css\";\r\n\r\nimport * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\r\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\r\nimport { UnrealBloomPass } from \"three/examples/jsm/postprocessing/UnrealBloomPass\";\r\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\r\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader\";\r\nimport { BasicThreeDemo } from \"./BasicThreeDemo\";\r\nimport gsap from \"gsap\";\r\nimport tex2Url from \"./b2.png\";\r\nimport tex3Url from \"./sprite1.png\";\r\nimport data from \"./flipsorted.json\";\r\n\r\nconst loader = new THREE.TextureLoader();\r\nexport const texBlur = loader.load(tex2Url);\r\nexport const texBlur2 = loader.load(tex3Url);\r\n\r\nimport { Spiral } from \"./Spiral\";\r\nimport { gui } from \"./gui\";\r\nimport { particles } from \"./allParticles\";\r\n\r\nexport class App extends BasicThreeDemo {\r\n  constructor(inoptions) {\r\n    const options = {\r\n      container: document.getElementById(\"container\"),\r\n      length: 400,\r\n      width: 20,\r\n      roadWidth: 9,\r\n      islandWidth: 2,\r\n      nPairs: 100,\r\n      roadSections: 3,\r\n      color1: \"#288428\",\r\n      color2: \"#de8911\",\r\n      color3: \"#a72121\",\r\n\r\n      eventColors: {\r\n        sport: \"#00ff00\",\r\n        weather: \"#d519ff\",\r\n        date: \"#432884\",\r\n        other: \"#ebdd37\",\r\n        other2: \"#084a1b\",\r\n      },\r\n\r\n      backgroundColor: \"#000\",\r\n      txtColor: \"#848484\",\r\n\r\n      timeScale: 1,\r\n\r\n      rotateCorck: 0.0004,\r\n      rotateBlock: 0.0004,\r\n      ...inoptions,\r\n    };\r\n    super(options.container);\r\n    this.options = options;\r\n\r\n    this.scene.add(this.camera);\r\n\r\n    this.addGui();\r\n    this.spiral = new Spiral(this, options);\r\n\r\n    const c = new THREE.Color(\"black\");\r\n\r\n    //this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    // this.controls.addEventListener(\"change\", () => {\r\n    //   console.log(\"Controls\", this.controls);\r\n    //   console.log(\"Camera\", this.camera);\r\n    //   console.log(\"Pos\", this.camera.position);\r\n    //   console.log(\"Rotation\", this.camera.rotation);\r\n\r\n    //   console.log(\"---\");\r\n    //   console.log(\"controls\", this.controls.position0, this.controls.target0, this.controls.zoomO)\r\n    // });\r\n    // this.controls.update();\r\n\r\n    // setTimeout(() => {\r\n    //   this.camera.position.set(0,120,150);\r\n    //   this.camera.rotateX(-Math.PI / 2);\r\n    //   // this.controls.update();\r\n    // }, 500);\r\n\r\n    this.scene.background = c;\r\n\r\n    this.particles = particles(this.camera);\r\n  }\r\n\r\n  addGui() {\r\n    let f = null;\r\n    f = gui.addFolder(\"Camera Position\");\r\n    f.add(this.camera.position, \"x\", -100, 100);\r\n    f.add(this.camera.position, \"y\");\r\n    f.add(this.camera.position, \"z\", -100, 100);\r\n\r\n    f = gui.addFolder(\"Camera Rotation\");\r\n    f.add(this.camera.rotation, \"x\", -Math.PI, Math.PI, 0.001);\r\n    f.add(this.camera.rotation, \"y\", -Math.PI, Math.PI, 0.001);\r\n    f.add(this.camera.rotation, \"z\", -Math.PI, Math.PI, 0.001);\r\n\r\n    f = gui.addFolder(\"Effects\");\r\n    f.open();\r\n    f.add(this.options, \"rotateCorck\", 0, 0.02, 0.0001);\r\n    f.add(this.options, \"rotateBlock\", 0, 0.02, 0.0001);\r\n\r\n    f = gui.addFolder(\"Colors\");\r\n    f.open();\r\n\r\n    [\"color1\", \"color2\", \"color3\"].forEach((colorOption) => {\r\n      f.addColor(this.options, colorOption).onChange((v) => {\r\n        this.spiral.group.children\r\n          .filter((x) => x.userData.colorOption === colorOption)\r\n          .forEach((x) => {\r\n            x.material.color = new THREE.Color(v);\r\n          });\r\n      });\r\n    });\r\n\r\n    f = gui.addFolder(\"Data colors\");\r\n    Object.keys(this.options.eventColors).forEach((key) => {\r\n      f.addColor(this.options.eventColors, key).onChange((v) => {\r\n        this.spiral.group.children\r\n          .filter((x) => x.material.userData.eventColors === key)\r\n          .forEach((x) => {\r\n            x.material.color = new THREE.Color(v);\r\n          });\r\n      });\r\n    });\r\n\r\n    f = gui.addFolder(\"Other colors\");\r\n    f.addColor(this.options, \"backgroundColor\").onChange((v) => {\r\n      this.scene.background = new THREE.Color(v);\r\n    });\r\n\r\n    // Add timescale options\r\n    gui.add(this.options, \"timeScale\", 0, 10, 0.1).onChange((v) => {\r\n      gsap.globalTimeline.timeScale(v);\r\n    });\r\n  }\r\n\r\n  setupInteractions() {\r\n    // listen to mouse down\r\n    this.container.addEventListener(\"click\", (e) => {\r\n      if (e.button === 2) {\r\n        //e.preventDefault();\r\n        this.spiral.explode();\r\n      }\r\n    });\r\n\r\n    // listen to clicks\r\n    this.container.addEventListener(\"mousedown\", (e) => {\r\n      if (e.button === 2) {\r\n        this.cameraAnimation.timeScale(-7);\r\n        this.spiral.explode();\r\n        e.preventDefault();\r\n      } else {\r\n        this.cameraAnimation.timeScale(15);\r\n      }\r\n    });\r\n\r\n    this.container.addEventListener(\"mouseup\", (e) => {\r\n      this.cameraAnimation.timeScale(1);\r\n    });\r\n\r\n    // listen to mouse move\r\n    this.mouse = {\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n\r\n    this.renderer.domElement.addEventListener(\"mousemove\", (e) => {\r\n      this.mouse.x = (e.clientX / this.renderer.domElement.width) * 2 - 1;\r\n      this.mouse.y = -(e.clientY / this.renderer.domElement.height) * 2 + 1;\r\n\r\n      gsap.to(this.camera.rotation, {\r\n        duration: 3,\r\n        x: -Math.PI / 2 - this.mouse.y / 5,\r\n        y: 0 + this.mouse.x / 5,\r\n      });\r\n    });\r\n\r\n    // Buttons\r\n    document.getElementById(\"movecamera\").addEventListener(\"click\", () => {\r\n      if (this.camera.position.x == 0) {\r\n        this.camera.position.set(-20, 0, -20);\r\n      } else if (this.camera.position.x == -20) {\r\n        this.camera.position.set(17, 0, -5);\r\n      } else {\r\n        this.camera.position.set(0, 0, 0);\r\n      }\r\n      gui.updateDisplay();\r\n    });\r\n\r\n    document.getElementById(\"changespeed\").addEventListener(\"click\", (ev) => {\r\n      if (gsap.globalTimeline.timeScale() == 1) {\r\n        gsap.globalTimeline.timeScale(0.5);\r\n      } else if (gsap.globalTimeline.timeScale() == 0.5) {\r\n        gsap.globalTimeline.timeScale(0.2);\r\n      } else if (gsap.globalTimeline.timeScale() == 0.2) {\r\n        gsap.globalTimeline.timeScale(1.5);\r\n      } else if (gsap.globalTimeline.timeScale() == 1.5) {\r\n        gsap.globalTimeline.timeScale(2);\r\n      } else if (gsap.globalTimeline.timeScale() == 2) {\r\n        gsap.globalTimeline.timeScale(6);\r\n      } else if (gsap.globalTimeline.timeScale() == 6) {\r\n        gsap.globalTimeline.timeScale(1);\r\n      }\r\n\r\n      ev.target.innerText = `Change speed: ${gsap.globalTimeline.timeScale()}`;\r\n      gui.updateDisplay();\r\n    });\r\n  }\r\n\r\n  async init() {\r\n    this.scene.add(new THREE.AmbientLight(0xffffff, 0.2));\r\n    await this.spiral.init();\r\n\r\n    // Initial camera position\r\n    this.camera.position.z = 0;\r\n    this.camera.position.y = data.length * 0.5 + 50;\r\n    this.camera.rotateX(-Math.PI / 2);\r\n\r\n    // Camera Animation\r\n    let duration = data.length / (30 * 2);\r\n    duration = Math.max(duration, 20);\r\n    this.cameraAnimation = gsap.to(this.camera.position, {\r\n      y: 50,\r\n      duration,\r\n      ease: \"power1.inOut\",\r\n      yoyo: true,\r\n      repeat: -1,\r\n      timeScale: 0.4,\r\n      onComplete: () => {\r\n        console.log(\"COMPLETE\");\r\n        //this.spiral.explode();\r\n      },\r\n      onRepeat: () => {\r\n        // when the camera is at the top, explode the spiral\r\n        if(this.cameraAnimation.progress() < 0.1) {\r\n          this.spiral.explode();\r\n\r\n        }\r\n      },\r\n      onReverseComplete: () => {\r\n        console.log(\"REVERSE COMPLETE\")\r\n      }\r\n    });\r\n\r\n    this.setupInteractions();\r\n\r\n    this.initPostProcessing();\r\n\r\n    gui.updateDisplay();\r\n\r\n    this.tick();\r\n  }\r\n\r\n  initPostProcessing() {\r\n    this.composer = new EffectComposer(this.renderer);\r\n    this.composer.addPass(new RenderPass(this.scene, this.camera));\r\n\r\n    let bloomOptions = {\r\n      resolution: new THREE.Vector2(this.renderer.domElement.width, this.renderer.domElement.height),\r\n      strength: 0.6,\r\n      radius: 0.01,\r\n      threshold: 0.1,\r\n    };\r\n    const bloomPass = new UnrealBloomPass(Object.values(bloomOptions));\r\n\r\n    this.composer.addPass(bloomPass);\r\n\r\n    var effectCopy = new ShaderPass(CopyShader);\r\n    effectCopy.renderToScreen = true;\r\n    this.composer.addPass(effectCopy);\r\n  }\r\n\r\n  onResize() {\r\n    this.composer.setSize(this.renderer.domElement.width, this.renderer.domElement.height);\r\n  }\r\n\r\n  render(delta) {\r\n    this.composer.render(delta);\r\n  }\r\n\r\n  update(delta) {\r\n    let time = this.clock.elapsedTime;\r\n    this.spiral.update(delta);\r\n\r\n    this.particles.forEach((particles) => {\r\n      particles.rotation.y += 0.001;\r\n      particles.rotation.z += 0.001;\r\n    });\r\n\r\n    gui.updateDisplay();\r\n  }\r\n}\r\n\r\nconst a = new App();\r\na.init();\r\n"],"names":["THREE.WebGLRenderer","THREE.PerspectiveCamera","THREE.Scene","THREE.Clock","dat.GUI","THREE.Vector3","THREE.Group","THREE.BoxBufferGeometry","THREE.SphereBufferGeometry","THREE.PointLight","THREE.Mesh","THREE.MeshLambertMaterial","THREE.Color","gsap","THREE.MeshBasicMaterial","THREE.Frustum","THREE.Matrix4","THREE.BufferGeometry","THREE.Float32BufferAttribute","THREE.PointsMaterial","THREE.AdditiveBlending","THREE.Points","THREE.TextureLoader","THREE.AmbientLight","THREE.Vector2"],"mappings":"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"}